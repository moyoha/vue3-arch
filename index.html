<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div id="app"></div>
    <script type="module">
      // import {
      //   createRenderer,
      //   render,
      //   Fragment,
      //   h,
      //   Text,
      // } from "/node_modules/@vue/runtime-dom/dist/runtime-dom.esm-browser.prod.js";
      import { render, h, Text, Fragment, ref,onBeforeMount,
        onBeforeUpdate,
        onUpdated,
        onMounted,
        getCurrentInstance,
        provide,
        inject,
      } from "./packages/runtime-dom/dist/runtime-dom.js";


     const P3 = {
        P3: 1,
        setup(props) {
          const name = inject("name");
          console.log(name);
          const age = inject("age", 30);
          console.log(age);
          return () => {
            return h("div", [name.value, age]);
          };
        },
      };
      const P2 = {
        P2: 1,
        render() {
          return h(P3);
        },
      };
      const P1 = {
        P1: 1,
        setup(props) {
          const name = ref("jw");

          setTimeout(() => {
            name.value = "handsome jw";
          }, 1000);
          provide("name", name);

          return () => h(P2);
        },
      };
      // 在父组件中提供数据，后代组件中获取数据
      render(h(P1), app);

    </script>
  </body>
</html>
